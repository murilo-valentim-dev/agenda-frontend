<div class="agenda-container">
    <h2>Agenda de Alugu√©is</h2>

    <!-- Calend√°rio interativo com refer√™ncia para o ViewChild -->
    <full-calendar #calendar [options]="calendarOptions"></full-calendar>

    <!-- ‚úÖ Legenda visual -->
    <div class="legend mt-3">
        <span class="occupied-color me-2"></span> Dia com aluguel (üè†)
    </div>

    <!-- Formul√°rio de cadastro, aparece quando uma data √© selecionada -->
    <div *ngIf="selectedDate" class="rental-form">
        <h3>Adicionar aluguel para {{ selectedDate }}</h3>

        <label>Nome:</label>
        <input [(ngModel)]="name" type="text" />

        <label for="cpf">CPF:</label>
        <input type="text" id="cpf" name="cpf" [(ngModel)]="cpf" placeholder="Digite o CPF" mask="000.000.000-00" />

        <label>Valor (R$):</label>
        <input [(ngModel)]="value" type="number" />

        <!-- Bot√µes de adicionar/atualizar -->
        <button *ngIf="!editando" (click)="addRental()">Adicionar</button>
        <button *ngIf="editando" (click)="atualizarRental()">Atualizar</button>
        <button *ngIf="editando" (click)="cancelarEdicao()">Cancelar</button>

        <!-- Lista de alugu√©is -->
        <div class="rentals-list" *ngIf="getRentalsForDate(selectedDate).length > 0">
            <h4>Alugu√©is para {{ selectedDate }}</h4>
            <ul>
                <li *ngFor="let r of getRentalsForDate(selectedDate)">
                    {{ r.nome }} - R$ {{ r.valor.toFixed(2) }} - {{ r.cpf | cpfMask }}
                    <button (click)="editarRental(r)">Editar</button>
                    <button (click)="excluirRental(r)">Excluir</button>
                </li>
            </ul>
        </div>
    </div>
</div>